pipeline {
    environment{
      dockerImage = ""
    }
    agent { 
        node {
            label 'docker-agent-cpp'
            }
      }
      stages {
          stage('build'){
              steps{
                  script{
                    dir('my_cpp_app/source/') {
                      dockerImage = docker.build "nidhamesselmani/my_docker_repo"
                    }
                  }
              }
          }
      }
       /*** workspace clean up*/
  post {
    always {
      cleanWs()
    }
  }  
}